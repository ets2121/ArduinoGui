<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arduino Web IDE</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
</head>
<body>
    <!-- ======================= Sketch Selector Modal ======================= -->
    <div id="sketch-modal" class="modal active">
        <div class="modal-content">
            <h2>Welcome to the Arduino Web IDE</h2>
            <p>Please select an existing sketch or create a new one.</p>
            <div id="sketch-selection-area">
                <h4>Existing Sketches</h4>
                <div id="existing-sketch-list" class="card-container"></div>
            </div>
            <hr>
            <div id="new-sketch-area">
                <h4>Create New Sketch</h4>
                <div class="input-group">
                    <input type="text" id="new-sketch-name" placeholder="Enter new sketch name...">
                    <button id="create-sketch-button">Create</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ======================= Main Application ======================= -->
    <main id="app-container" style="display: none;"> <!-- Initially hidden -->
        <nav id="main-nav">
            <div id="sketch-name-display">No Sketch Loaded</div>
            <button class="nav-button active" data-page="editor">Editor</button>
            <button class="nav-button" data-page="libraries">Libraries</button>
            <button class="nav-button" data-page="boards">Boards</button>
        </nav>

        <!-- Page: Editor -->
        <div id="page-editor" class="page active">
            <div id="file-sidebar">
                <h4>Sketch Files</h4>
                <div id="file-list" class="card-container"></div>
                <div class="input-group-vertical">
                    <input type="text" id="new-file-name" placeholder="new_file.ino">
                    <button id="create-file-button">New File</button>
                </div>
            </div>
            <div id="editor-main">
                <div id="file-tabs">
                    <!-- Tabs will be dynamically inserted here -->
                </div>
                <div id="editor-container">
                    <textarea id="code-editor"></textarea>
                </div>
                <div id="editor-controls">
                    <select id="board-selector"><option>Select Board</option></select>
                    <button id="save-file-button">Save Current File</button>
                    <button id="compile-button">Compile</button>
                    <button id="upload-button">Upload</button>
                    <button id="delete-file-button" class="danger">Delete Current File</button>
                    <button id="rename-file-button">Rename Current File</button>
                </div>
            </div>
            <div id="console-container">
                <pre id="console-output"></pre>
            </div>
        </div>

        <!-- Page: Libraries -->
        <div id="page-libraries" class="page">
            <h2>Library Manager</h2>
            <div class="card">
                <h4>Search for Libraries</h4>
                <div class="input-group">
                    <input type="search" id="library-search-input" placeholder="e.g., Adafruit NeoPixel">
                    <button id="library-search-button">Search</button>
                </div>
                <div id="library-search-results" class="card-container"></div>
            </div>
            <div class="card">
                <h4>Installed Libraries</h4>
                <div id="installed-libraries-list" class="card-container"></div>
            </div>
        </div>
        
        <!-- Page: Boards -->
        <div id="page-boards" class="page">
             <h2>Board Manager</h2>
             <div class="card">
                <h4>Installed Platforms</h4>
                <div id="installed-cores-list" class="card-container"></div>
            </div>
        </div>

    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/clike/clike.min.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
